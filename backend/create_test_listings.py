#!/usr/bin/env python
"""
í…ŒìŠ¤íŠ¸ìš© ë§¤ë¬¼ ë°ì´í„° ìƒì„± ìŠ¤í¬ë¦½íŠ¸
"""
import os
import django
from datetime import date

# Django ì„¤ì •
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'config.settings')
django.setup()

from listings.models import Listing
from users.models import UserProfile
from django.contrib.auth.models import User

def create_test_user():
    """í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì ìƒì„±"""
    user, created = User.objects.get_or_create(
        username='testuser',
        defaults={
            'email': 'test@example.com',
            'is_active': True
        }
    )
    if created:
        user.set_password('testpass123')
        user.save()
        print(f"âœ… í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì ìƒì„±: {user.username}")
    
    # UserProfile ìƒì„±
    profile, created = UserProfile.objects.get_or_create(
        user=user,
        defaults={
            'ì‚¬ìš©ììœ í˜•': 'user',
            'ì—°ë½ì²˜': '010-1234-5678'
        }
    )
    if created:
        print(f"âœ… ì‚¬ìš©ì í”„ë¡œí•„ ìƒì„±: {profile.user.username}")
    
    return profile


def create_test_listings():
    """í…ŒìŠ¤íŠ¸ ë§¤ë¬¼ ë°ì´í„° ìƒì„±"""
    profile = create_test_user()
    
    # ê¸°ì¡´ í…ŒìŠ¤íŠ¸ ë§¤ë¬¼ ì‚­ì œ
    Listing.objects.filter(ë“±ë¡ì‚¬ìš©ìID=profile).delete()
    print("\nğŸ—‘ï¸  ê¸°ì¡´ í…ŒìŠ¤íŠ¸ ë§¤ë¬¼ ì‚­ì œ ì™„ë£Œ\n")
    
    test_listings = [
        {
            'ë§¤ë¬¼íƒ€ì…': 'jeonse',
            'ì£¼íƒì¢…ë¥˜': 'apartment',
            'ì „ì„¸ë³´ì¦ê¸ˆ': 320000000,  # 3.2ì–µ
            'ì£¼ì†Œ': 'ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123',
            'ë„ë¡œëª…ì£¼ì†Œ': 'ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123',
            'ìœ„ë„': 37.504896,
            'ê²½ë„': 127.048326,
            'ì›”ê´€ë¦¬ë¹„': 120000,
            'ì£¼ì°¨ì •ë³´': 'ì£¼ì°¨ 1ëŒ€',
            'ì „ìš©ë©´ì _ì œê³±ë¯¸í„°': 84.97,
            'ì „ìš©ë©´ì _í‰': 25.72,
            'ê³µê¸‰ë©´ì _ì œê³±ë¯¸í„°': 109.23,
            'ë°©ìˆ˜': 3,
            'ìš•ì‹¤ìˆ˜': 2,
            'ì¸µìˆ˜': '12/25',
            'í˜„ì¬ì¸µ': 12,
            'ì´ì¸µìˆ˜': 25,
            'ì¤€ê³µë…„ë„': 2008,
            'ë°©í–¥': 'ë‚¨ë™',
            'ì´ì„¸ëŒ€ìˆ˜': 512,
            'ì´ì£¼ì°¨ëŒ€ìˆ˜': 600,
            'í˜„ê´€ìœ í˜•': 'ê³„ë‹¨ì‹',
            'ì…ì£¼ê°€ëŠ¥ì¼': 'ì¦‰ì‹œ',
            'ê±´ì¶•ë¬¼ìš©ë„': 'ê³µë™ì£¼íƒ(ì•„íŒŒíŠ¸)',
            'ì‚¬ìš©ìŠ¹ì¸ì¼': date(2008, 9, 15),
            'ìµœì´ˆë“±ë¡ì¼': date(2025, 10, 3),
            'ê³„ì•½ê¸°ê°„_ê°œì›”': 24,
            'ì¬ê³„ì•½ê°€ëŠ¥ì—¬ë¶€': True,
            'ëŒ€ì¤‘êµí†µì ìˆ˜': 8,
            'ë…¸ì„ ë‹¤ì–‘ì„±ì ìˆ˜': 4,
            'ë²„ìŠ¤ì •ë¥˜ì¥ì •ë³´': [
                {
                    'stop_name': 'ì„ ë¦‰ì—­.ë¥´ë„¤ìƒìŠ¤í˜¸í…”',
                    'distance_m': 180,
                    'bus_numbers': ['146', '341', '360']
                },
                {
                    'stop_name': 'ê°•ë‚¨ì—­ 10ë²ˆì¶œêµ¬',
                    'distance_m': 320,
                    'bus_numbers': ['140', '148', '360']
                }
            ],
            'ì§€í•˜ì² ì—­ì •ë³´': [
                {
                    'station_name': 'ì„ ë¦‰ì—­',
                    'line_names': ['2í˜¸ì„ ', 'ìˆ˜ì¸ë¶„ë‹¹ì„ '],
                    'distance_m': 420
                },
                {
                    'station_name': 'ê°•ë‚¨ì—­',
                    'line_names': ['2í˜¸ì„ ', 'ì‹ ë¶„ë‹¹ì„ '],
                    'distance_m': 650
                }
            ],
            'ì´ë¯¸ì§€URLs': [
                '/images/house1.jpg',
                '/images/house2.jpg',
                '/images/house3.jpg'
            ],
            'í¸ì˜ì‹œì„¤ìš”ì•½': 'ë„ë³´ 5ë¶„ ë‚´ í¸ì˜ì , ì¹´í˜, ì‹ë‹¹ ë°€ì§‘. GS25, ìŠ¤íƒ€ë²…ìŠ¤, ë§¥ë„ë‚ ë“œ ë“±',
            'QAì •ë³´': [],
            'ìƒì„¸ì„¤ëª…': 'ê°•ë‚¨ì—­ ì¸ê·¼ ì‹ ì¶• ì•„íŒŒíŠ¸ì…ë‹ˆë‹¤. êµí†µì´ ë§¤ìš° í¸ë¦¬í•˜ë©° ì£¼ë³€ í¸ì˜ì‹œì„¤ì´ ìš°ìˆ˜í•©ë‹ˆë‹¤.',
            'í™œì„±í™”ì—¬ë¶€': True,
            'ë§¤ë¬¼ìƒíƒœ': 'available'
        },
        {
            'ë§¤ë¬¼íƒ€ì…': 'monthly',
            'ì£¼íƒì¢…ë¥˜': 'oneroom',
            'ì›”ì„¸ë³´ì¦ê¸ˆ': 10000000,  # 1ì²œë§Œì›
            'ì›”ì„¸': 600000,  # 60ë§Œì›
            'ì£¼ì†Œ': 'ì„œìš¸íŠ¹ë³„ì‹œ ë§ˆí¬êµ¬ ìƒì•”ë™ DMCë¡œ 123',
            'ë„ë¡œëª…ì£¼ì†Œ': 'ì„œìš¸íŠ¹ë³„ì‹œ ë§ˆí¬êµ¬ ìƒì•”ë™ DMCë¡œ 123',
            'ìœ„ë„': 37.579617,
            'ê²½ë„': 126.889497,
            'ì›”ê´€ë¦¬ë¹„': 80000,
            'ì£¼ì°¨ì •ë³´': 'ë¶ˆê°€',
            'ì „ìš©ë©´ì _ì œê³±ë¯¸í„°': 33.05,
            'ì „ìš©ë©´ì _í‰': 10.0,
            'ë°©ìˆ˜': 1,
            'ìš•ì‹¤ìˆ˜': 1,
            'ì¸µìˆ˜': '5/12',
            'í˜„ì¬ì¸µ': 5,
            'ì´ì¸µìˆ˜': 12,
            'ì¤€ê³µë…„ë„': 2015,
            'ë°©í–¥': 'ë‚¨í–¥',
            'ì…ì£¼ê°€ëŠ¥ì¼': '2025-11-01',
            'ê±´ì¶•ë¬¼ìš©ë„': 'ë‹¤ê°€êµ¬ì£¼íƒ',
            'ê³„ì•½ê¸°ê°„_ê°œì›”': 12,
            'ì¬ê³„ì•½ê°€ëŠ¥ì—¬ë¶€': True,
            'ëŒ€ì¤‘êµí†µì ìˆ˜': 9,
            'ë…¸ì„ ë‹¤ì–‘ì„±ì ìˆ˜': 5,
            'ë²„ìŠ¤ì •ë¥˜ì¥ì •ë³´': [
                {
                    'stop_name': 'ìƒì•”ì›”ë“œì»µê²½ê¸°ì¥',
                    'distance_m': 120,
                    'bus_numbers': ['271', '710', '750A']
                }
            ],
            'ì§€í•˜ì² ì—­ì •ë³´': [
                {
                    'station_name': 'ë””ì§€í„¸ë¯¸ë””ì–´ì‹œí‹°ì—­',
                    'line_names': ['6í˜¸ì„ ', 'ê³µí•­ì² ë„', 'ê²½ì˜ì¤‘ì•™ì„ '],
                    'distance_m': 280
                }
            ],
            'ì´ë¯¸ì§€URLs': [
                '/images/room1.jpg',
                '/images/room2.jpg'
            ],
            'í¸ì˜ì‹œì„¤ìš”ì•½': 'CGV, ë¡¯ë°ë§ˆíŠ¸, ìŠ¤íƒ€í•„ë“œ ê³ ì–‘ ì¸ì ‘',
            'QAì •ë³´': [],
            'ìƒì„¸ì„¤ëª…': 'DMC ì—­ì„¸ê¶Œ ì›ë£¸ì…ë‹ˆë‹¤. ì‹ ì¶• ê±´ë¬¼ë¡œ ê¹¨ë—í•˜ê³  êµí†µì´ í¸ë¦¬í•©ë‹ˆë‹¤.',
            'í™œì„±í™”ì—¬ë¶€': True,
            'ë§¤ë¬¼ìƒíƒœ': 'available'
        },
        {
            'ë§¤ë¬¼íƒ€ì…': 'sale',
            'ì£¼íƒì¢…ë¥˜': 'apartment',
            'ë§¤ë§¤ê°€': 1500000000,  # 15ì–µ
            'ì£¼ì†Œ': 'ì„œìš¸íŠ¹ë³„ì‹œ ì†¡íŒŒêµ¬ ì ì‹¤ë™ ì˜¬ë¦¼í”½ë¡œ 300',
            'ë„ë¡œëª…ì£¼ì†Œ': 'ì„œìš¸íŠ¹ë³„ì‹œ ì†¡íŒŒêµ¬ ì ì‹¤ë™ ì˜¬ë¦¼í”½ë¡œ 300',
            'ìœ„ë„': 37.511922,
            'ê²½ë„': 127.098205,
            'ì›”ê´€ë¦¬ë¹„': 200000,
            'ì£¼ì°¨ì •ë³´': 'ì„¸ëŒ€ë‹¹ 2ëŒ€',
            'ì „ìš©ë©´ì _ì œê³±ë¯¸í„°': 131.45,
            'ì „ìš©ë©´ì _í‰': 39.77,
            'ê³µê¸‰ë©´ì _ì œê³±ë¯¸í„°': 165.29,
            'ë°©ìˆ˜': 4,
            'ìš•ì‹¤ìˆ˜': 3,
            'ì¸µìˆ˜': '18/25',
            'í˜„ì¬ì¸µ': 18,
            'ì´ì¸µìˆ˜': 25,
            'ì¤€ê³µë…„ë„': 2018,
            'ë°©í–¥': 'ë‚¨í–¥',
            'ì´ì„¸ëŒ€ìˆ˜': 1024,
            'ì´ì£¼ì°¨ëŒ€ìˆ˜': 2048,
            'í˜„ê´€ìœ í˜•': 'ë³µë„ì‹',
            'ì…ì£¼ê°€ëŠ¥ì¼': 'í˜‘ì˜',
            'ê±´ì¶•ë¬¼ìš©ë„': 'ê³µë™ì£¼íƒ(ì•„íŒŒíŠ¸)',
            'ì‚¬ìš©ìŠ¹ì¸ì¼': date(2018, 5, 20),
            'ìµœì´ˆë“±ë¡ì¼': date(2025, 9, 15),
            'ëŒ€ì¤‘êµí†µì ìˆ˜': 10,
            'ë…¸ì„ ë‹¤ì–‘ì„±ì ìˆ˜': 5,
            'ë²„ìŠ¤ì •ë¥˜ì¥ì •ë³´': [
                {
                    'stop_name': 'ì ì‹¤ì—­ 2ë²ˆì¶œêµ¬',
                    'distance_m': 250,
                    'bus_numbers': ['303', '320', '3217', '3313']
                }
            ],
            'ì§€í•˜ì² ì—­ì •ë³´': [
                {
                    'station_name': 'ì ì‹¤ì—­',
                    'line_names': ['2í˜¸ì„ ', '8í˜¸ì„ '],
                    'distance_m': 300
                },
                {
                    'station_name': 'ì ì‹¤ìƒˆë‚´ì—­',
                    'line_names': ['2í˜¸ì„ '],
                    'distance_m': 450
                }
            ],
            'ì´ë¯¸ì§€URLs': [
                '/images/apt1.jpg',
                '/images/apt2.jpg',
                '/images/apt3.jpg',
                '/images/apt4.jpg'
            ],
            'í¸ì˜ì‹œì„¤ìš”ì•½': 'ë¡¯ë°ì›”ë“œ, ë¡¯ë°ë§ˆíŠ¸, ì„ì´Œí˜¸ìˆ˜ ì¸ê·¼. ì´ˆ/ì¤‘/ê³ ë“±í•™êµ ë„ë³´ 10ë¶„',
            'QAì •ë³´': [],
            'ìƒì„¸ì„¤ëª…': 'ì ì‹¤ ì‹ ì¶• ì•„íŒŒíŠ¸ì…ë‹ˆë‹¤. í•™êµ° ìš°ìˆ˜, êµí†µ í¸ë¦¬, ëŒ€í˜• ì‡¼í•‘ëª° ì¸ì ‘ìœ¼ë¡œ ìƒí™œ ì¸í”„ë¼ê°€ ì™„ë²½í•©ë‹ˆë‹¤.',
            'í™œì„±í™”ì—¬ë¶€': True,
            'ë§¤ë¬¼ìƒíƒœ': 'available'
        },
        {
            'ë§¤ë¬¼íƒ€ì…': 'jeonse',
            'ì£¼íƒì¢…ë¥˜': 'apartment',
            'ì „ì„¸ë³´ì¦ê¸ˆ': 255000000,  # 2.55ì–µ
            'ì£¼ì†Œ': 'ì „ë¶ ë¬´ì£¼êµ° ë¬´ì£¼ì ì ì²œë¡œ 343',
            'ë„ë¡œëª…ì£¼ì†Œ': 'ì „ë¶ ë¬´ì£¼êµ° ë¬´ì£¼ì ì ì²œë¡œ 343',
            'ìœ„ë„': 35.000000,
            'ê²½ë„': 127.000000,
            'ì›”ê´€ë¦¬ë¹„': 50000,
            'ì£¼ì°¨ì •ë³´': 'ì„¸ëŒ€ë‹¹ 1ëŒ€',
            'ì „ìš©ë©´ì _ì œê³±ë¯¸í„°': 59.5,
            'ì „ìš©ë©´ì _í‰': 18.0,
            'ë°©ìˆ˜': 2,
            'ìš•ì‹¤ìˆ˜': 1,
            'ì¸µìˆ˜': '3/5',
            'í˜„ì¬ì¸µ': 3,
            'ì´ì¸µìˆ˜': 5,
            'ì¤€ê³µë…„ë„': 2010,
            'ë°©í–¥': 'ë‚¨ì„œí–¥',
            'ì…ì£¼ê°€ëŠ¥ì¼': 'ì¦‰ì‹œ',
            'ê±´ì¶•ë¬¼ìš©ë„': 'ë‹¤ê°€êµ¬ì£¼íƒ',
            'ê³„ì•½ê¸°ê°„_ê°œì›”': 24,
            'ì¬ê³„ì•½ê°€ëŠ¥ì—¬ë¶€': True,
            'ëŒ€ì¤‘êµí†µì ìˆ˜': 5,
            'ë…¸ì„ ë‹¤ì–‘ì„±ì ìˆ˜': 2,
            'ë²„ìŠ¤ì •ë¥˜ì¥ì •ë³´': [
                {
                    'stop_name': 'ë¬´ì£¼ìì‚¬ë¬´ì†Œ',
                    'distance_m': 200,
                    'bus_numbers': ['171', '172']
                }
            ],
            'ì§€í•˜ì² ì—­ì •ë³´': [],
            'ì´ë¯¸ì§€URLs': [
                '/images/house1.jpg'
            ],
            'í¸ì˜ì‹œì„¤ìš”ì•½': 'ë¬´ì£¼ìë‚´ ì¤‘ì‹¬ê°€, í¸ì˜ì /ì•½êµ­ ë„ë³´ 5ë¶„',
            'QAì •ë³´': [],
            'ìƒì„¸ì„¤ëª…': 'ë¬´ì£¼ì ì¤‘ì‹¬ê°€ ì „ì„¸ ë§¤ë¬¼ì…ë‹ˆë‹¤.',
            'í™œì„±í™”ì—¬ë¶€': True,
            'ë§¤ë¬¼ìƒíƒœ': 'available'
        },
    ]
    
    created_count = 0
    for listing_data in test_listings:
        listing_data['ë“±ë¡ì‚¬ìš©ìID'] = profile
        listing = Listing.objects.create(**listing_data)
        created_count += 1
        print(f"âœ… [{created_count}] {listing.get_ë§¤ë¬¼íƒ€ì…_display()} - {listing.ì£¼ì†Œ[:30]}... (ID: {listing.id})")
    
    print(f"\nâœ¨ ì´ {created_count}ê°œì˜ í…ŒìŠ¤íŠ¸ ë§¤ë¬¼ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!\n")
    print("=" * 60)
    print("ğŸ“Š ìƒì„±ëœ ë§¤ë¬¼ í†µê³„:")
    print(f"   - ì „ì„¸: {Listing.objects.filter(ë§¤ë¬¼íƒ€ì…='jeonse').count()}ê±´")
    print(f"   - ì›”ì„¸: {Listing.objects.filter(ë§¤ë¬¼íƒ€ì…='monthly').count()}ê±´")
    print(f"   - ë§¤ë§¤: {Listing.objects.filter(ë§¤ë¬¼íƒ€ì…='sale').count()}ê±´")
    print("=" * 60)
    print("\nğŸ”— API í…ŒìŠ¤íŠ¸:")
    print("   - ëª©ë¡: http://localhost:8000/api/listings/")
    print("   - ìƒì„¸: http://localhost:8000/api/listings/1/")
    print("   - Swagger: http://localhost:8000/api/swagger/")
    print()


if __name__ == '__main__':
    create_test_listings()






